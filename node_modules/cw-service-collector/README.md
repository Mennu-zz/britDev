# CW Collector Service

The CW Collector Service provides the ability to write collectors for various backend data using push or pull mechanisms.

## Starting the collector service

```
$ cw start collector
```

## Stopping the collector service

```
$ cw stop collector
```

## Writing collectors

Collectors are written using JavaScript and kept in any directory with a `collector-service.json` file.
Each collector is contained in its own directory and will be run and a separate process.

The `Collector` object is available by default.

### Push collectors

```
var pullCollector = Collector.pull(options)
```

uses http status code for state details


### Pull collectors
```
var pullCollector = Collector.pull(options)
```

## Status of collectors

* list all collectors
* list active collectors
* restart collector
* kill collector
* start collector
* stop collector
* stats query collector

## Technical notes

status code 0 == all fine, 1 == error

**IPC message structure**

```
{
  code: status code,
  body: message body
}
```

**MQ message structure**

```
{
  code: status code, // convey any failures
  origin: {
    type: collector / processor
    name: name of the collector / processor
  },
  time: time when the message was packed
  body: message body - as returned by the collector / processor
}

```

Exception is REFRESH

